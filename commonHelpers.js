var S=Object.defineProperty;var P=(o,e,a)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a;var L=(o,e,a)=>(P(o,typeof e!="symbol"?e+"":e,a),a),F=(o,e,a)=>{if(!e.has(o))throw TypeError("Cannot "+a)};var f=(o,e,a)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,a)};var p=(o,e,a)=>(F(o,e,"access private method"),a);import{a as U,i as y,S as O}from"./assets/vendor-527658dd.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function a(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(s){if(s.ep)return;s.ep=!0;const t=a(s);fetch(s.href,t)}})();var u,b;class w{constructor(e,a,r,s=["largeImageURL","webformatURL","tags"],t=["likes","views","comments","downloads"]){f(this,u);this.id=e,this.requestURL=a,this.requestConfig=r,this.imagePropsList=s,this.descPropsList=t,this.data,this.imgData,this.descData}set(e,a,r,s){this.requestURL=e,this.requestConfig=a,this.imagePropsList=r,this.descPropsList=s}async get(){if(!this.requestURL||!this.requestConfig)return;const e=async()=>await U.get(this.requestURL,{params:this.requestConfig});this.data=await e(),this.descData=p(this,u,b).call(this,this.data.data.hits,this.descPropsList),this.imgData=p(this,u,b).call(this,this.data.data.hits,this.imagePropsList)}static testUserInput(e){return e.trim()?/^[a-z\s]+$/gi.test(e.trim()):!1}}u=new WeakSet,b=function(e,a){return e.map(r=>{const s={};return a.forEach(t=>{s[t]=r[t]}),s})};const R="/goit-js-hw-12/assets/rejectedIcon-9956cb73.svg",C="/goit-js-hw-12/assets/izitoast-close-4cebbc46.svg";class d{constructor(){}static add(){const e=document.createElement("button");document.body.appendChild(e),e.outerHTML=this.markup}static remove(){const e=document.querySelector("#spinner-container");document.body.removeChild(e)}}L(d,"markup");class g{constructor(){}static show(e){e.classList.add("visible")}static hide(e){e.classList.remove("visible")}}var h,j;class m{constructor(e="",a=null,r=null,s=document.querySelector(".js-loadmore-button")||!0){f(this,h);this.parent=e,this.imgData=a,this.descData=r,this.showDesc=s,this.markup=p(this,h,j).call(this,this.imgData,this.descData)}static showPopup(e,a="input"){const r={class:"js-izitoast-message",titleColor:"#FFFFFF",messageColor:"#FFFFFF",message:e==="wrong input"?'Try something like "kitty", "best friends", "on the Moon" ;)':"Sorry, there are no images matching your search query. Please try again!",backgroundColor:e==="wrong input"?"#e0c34c":"#ef4040",progressBarColor:e==="wrong input"?"#f7e28b":"#b51b1b",messageSize:"16px",position:"topRight",displayMode:"replace",pauseOnHover:!1,iconUrl:R,close:!1,buttons:[[`<button type="button" style="background-color: transparent;"><img src=${C}></button>`,function(s,t){s.hide({transitionOut:"fadeOut"},t)}]],onOpening:function(s,t){const n=document.querySelector(a);n.blur(),n.addEventListener("focus",()=>{y.hide({transitionOut:"fadeOut"},t)},{once:!0})},onClosed:function(s,t){document.querySelector(a).removeEventListener("focus",()=>{y.hide({transitionOut:"fadeOut"},t)},{once:!0})}};y.show(r)}render(e,a){document.querySelector(this.parent).innerHTML+=this.markup,document.querySelectorAll(e).forEach((s,t)=>s.addEventListener("load",()=>{document.querySelectorAll(a)[t].classList.add("visible")}))}}h=new WeakSet,j=function(e,a){const r=this.showDesc?a.map(t=>`<ul class="js-item-desc">
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Likes</span>
              <span class="js-desc-value">${t.likes}</span>
            </li>
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Views</span>
              <span class="js-desc-value">${t.views}</span>
            </li>
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Comments</span>
              <span class="js-desc-value">${t.comments}</span>
            </li>
            <li class="js-desc-wrapper">
              <span class="js-desc-prop">Downloads</span>
              <span class="js-desc-value">${t.downloads}</span>
            </li>
          </ul>`):"";return e.map((t,n)=>`<li class="js-gallery-item"><a class="js-image-container" href="${t.largeImageURL}"><img class="js-item-image" src="${t.webformatURL}" alt="${t.tags}" /></a>${r?r[n]:""}</li>`).join(`

`)};const i={body:document.querySelector("body"),form:document.querySelector(".js-search-form"),input:document.querySelector(".js-search-input"),container:document.querySelector(".js-gallery"),checkbox:document.querySelector(".js-search-checkbox"),loadmore:document.querySelector(".js-loadmore-button")},c={url:"https://pixabay.com/api/",config:{key:"42242477-df8643eaa45736c853493b589",image_type:"photo",orientation:"horizontal",safesearch:!0,q:null,page:1,per_page:15}};g.hide(i.loadmore);d.markup='<div id="spinner-container" style="padding-top: 25px; display:flex; flex-direction:column; gap:15px; align-items:center;"><span class="js-processing-request">Loading images, please wait...</span><span class="loader"></span></div>';i.form.addEventListener("submit",async o=>{if(o.preventDefault(),i.container.innerHTML="",c.config.q=i.input.value.trim(),c.config.page=1,!w.testUserInput(i.input.value.trim())){m.showPopup("wrong input"),i.form.reset();return}try{d.add();const e=new w(1,c.url,c.config,["largeImageURL","webformatURL","tags"],["likes","views","comments","downloads"]);await e.get();const a=e.imgData,r=e.descData,s=e.data.data.totalHits;if(console.log(e.data.data.totalHits),!s){d.remove(),m.showPopup("nothing found"),i.form.reset();return}const t=new m(".js-gallery",a,r,i.checkbox.checked),n=new O(".js-gallery a",{className:"lightbox-wrapper"});d.remove(),t.render(".js-item-image",".js-gallery-item"),n.refresh(),i.form.reset(),s>15&&g.show(i.loadmore),i.loadmore.addEventListener("click",async()=>{c.config.page+=1,g.hide(i.loadmore);try{d.add();const l=new w(1,c.url,c.config,["largeImageURL","webformatURL","tags"],["likes","views","comments","downloads"]);await l.get();const v=l.imgData,q=l.descData,D=l.data.data.totalHits;console.log(l.data.data.totalHits),D-c.config.per_page*c.config.page>15&&g.show(i.loadmore);const k=new m(".js-gallery",v,q,i.checkbox.checked);d.remove(),k.render(".js-item-image",".js-gallery-item"),n.refresh()}catch(l){console.log(l)}})}catch(e){console.log(e)}});
//# sourceMappingURL=commonHelpers.js.map
